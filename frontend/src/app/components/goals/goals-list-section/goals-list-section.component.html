<section class="forms-container">
  <div class="selectOptionContainer">
    <div class="overflow-x-auto relative">
      <table class="user-table min-w-full bg-white">
        <thead class="bg-main-blue text-fill-white">
          <tr>
            <th class="w-1/3 p-2">Nome do Indicador</th>
            <th class="w-1/3 p-2">Meta {{ indicators.length > 0 ? (indicators[0].goal?.year || 'Anual') : 'Anual' }}
            </th>
            <th class="w-1/3 p-2">Ação</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="isLoading">
            <td colspan="3" class="relative">
              <div class="loading-circle">
                <div class="spinner"></div>
              </div>
            </td>
          </tr>
          <ng-container *ngIf="!isLoading">
            <tr *ngFor="let indicator of indicators; trackBy: trackByIndex" class="hover:bg-gray-100">
              <td class="p-2">{{ indicator.indicator_name }}</td>
              <td class="p-2">
                <form [formGroup]="indicatorForms[indicator.sai_id!]">
                  <input class="inputContainer--input w-full p-2 border border-gray-300 rounded"
                    formControlName="indicatorValue"
                    (input)="onValueChange(indicator, $event)">
                </form>
              </td>
              <td class="p-2 text-center">
                <button type="button" [disabled]="!indicatorForms[indicator.sai_id!].valid && !indicator.isInserted"
                  class="forms-Button bg-main-blue text-white px-4 py-2 rounded disabled:opacity-50"
                  (click)="toggleEdit(indicator)"> {{ !indicator.isInserted ? 'Atualizar' : 'Editar' }} </button>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</section>
